<!doctype html>
<html lang="fa-IR" dir="rtl" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-software-engineering/phase08-optional01-Elasticsearch" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.8.1">
<title data-rh="true">Elasticsearch (اختیاری) | StarAcademy</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://star-academy.github.io/codestar-documents/docs/software-engineering/phase08-optional01-Elasticsearch"><meta data-rh="true" property="og:locale" content="fa_IR"><meta data-rh="true" name="docusaurus_locale" content="fa"><meta data-rh="true" name="docsearch:language" content="fa"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Elasticsearch (اختیاری) | StarAcademy"><link data-rh="true" rel="icon" href="/codestar-documents/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://star-academy.github.io/codestar-documents/docs/software-engineering/phase08-optional01-Elasticsearch"><link data-rh="true" rel="alternate" href="https://star-academy.github.io/codestar-documents/docs/software-engineering/phase08-optional01-Elasticsearch" hreflang="fa-IR"><link data-rh="true" rel="alternate" href="https://star-academy.github.io/codestar-documents/docs/software-engineering/phase08-optional01-Elasticsearch" hreflang="x-default"><script data-rh="true" type="application/ld+json">{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"مهندسی نرم‌افزار","item":"https://star-academy.github.io/codestar-documents/docs/software-engineering"},{"@type":"ListItem","position":2,"name":"Elasticsearch (اختیاری)","item":"https://star-academy.github.io/codestar-documents/docs/software-engineering/phase08-optional01-Elasticsearch"}]}</script><link rel="stylesheet" href="/codestar-documents/assets/css/styles.6d391ce1.css">
<script src="/codestar-documents/assets/js/runtime~main.8565d2f1.js" defer="defer"></script>
<script src="/codestar-documents/assets/js/main.490b59a0.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<svg xmlns="http://www.w3.org/2000/svg" style="display: none;"><defs>
<symbol id="theme-svg-external-link" viewBox="0 0 24 24"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></symbol>
</defs></svg>
<script>!function(){var t="light";var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();document.documentElement.setAttribute("data-theme",e||t),document.documentElement.setAttribute("data-theme-choice",e||t)}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="پرش به مطلب اصلی"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">پرش به مطلب اصلی</a></div><nav aria-label="صفحه اصلی" class="theme-layout-navbar navbar navbar--fixed-top"><div class="navbar__inner"><div class="theme-layout-navbar-left navbar__items"><button aria-label="باز و بست منو" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/codestar-documents/"><div class="navbar__logo"><img src="/codestar-documents/img/logo.svg" alt="آکادمی ستاره" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/codestar-documents/img/logo.svg" alt="آکادمی ستاره" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">آکادمی ستاره</b></a><div class="navbar__item dropdown dropdown--hoverable"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link">مستندات</a><ul class="dropdown__menu"><li><a aria-current="page" class="dropdown__link dropdown__link--active" href="/codestar-documents/docs/general">عمومی</a></li><li><a aria-current="page" class="dropdown__link dropdown__link--active" href="/codestar-documents/docs/frontend">Frontend</a></li><li><a aria-current="page" class="dropdown__link dropdown__link--active" href="/codestar-documents/docs/software-engineering">Backend</a></li><li><a aria-current="page" class="dropdown__link dropdown__link--active" href="/codestar-documents/docs/devops">DevOps</a></li><li><a aria-current="page" class="dropdown__link dropdown__link--active" href="/codestar-documents/docs/soft-skills">مهارت‌های نرم</a></li><li><a aria-current="page" class="dropdown__link dropdown__link--active" href="/codestar-documents/docs/project">پروژه</a></li></ul></div><div class="navbar__item dropdown dropdown--hoverable"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link">CodeStar</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/codestar-documents/codestar/for-mentors">مستندات برگزاری دوره</a></li><li><a class="dropdown__link" href="/codestar-documents/codestar/for-interns">مستندات کاراموزان</a></li></ul></div></div><div class="theme-layout-navbar-right navbar__items navbar__items--right"><a href="https://www.aparat.com/Code_star/" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Aparat<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a><a href="https://github.com/Star-Academy/" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="system mode" aria-label="بین حالت تاریک و روشن سوئیچ کنید (الان system mode)"><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP systemToggleIcon_QzmC"><path fill="currentColor" d="m12 21c4.971 0 9-4.029 9-9s-4.029-9-9-9-9 4.029-9 9 4.029 9 9 9zm4.95-13.95c1.313 1.313 2.05 3.093 2.05 4.95s-0.738 3.637-2.05 4.95c-1.313 1.313-3.093 2.05-4.95 2.05v-14c1.857 0 3.637 0.737 4.95 2.05z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="theme-layout-main main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="بازگشت به بالا" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="نوار کناری مستندات" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/codestar-documents/docs/general">عمومی</a><button aria-label="باز کردن دسته بندی در نوار کناری &#x27;عمومی&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/codestar-documents/docs/frontend">فرانت‌اند</a><button aria-label="باز کردن دسته بندی در نوار کناری &#x27;فرانت‌اند&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" href="/codestar-documents/docs/software-engineering">مهندسی نرم‌افزار</a><button aria-label="بستن دسته بندی در نوار کناری &#x27;مهندسی نرم‌افزار&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/codestar-documents/docs/software-engineering/phase01-c-sharp">C#</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/codestar-documents/docs/software-engineering/phase02-full-text-search-project">Full-Text Search</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/codestar-documents/docs/software-engineering/phase03-clean-code">Clean Code</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/codestar-documents/docs/software-engineering/phase04-unit-test">Unit Test</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/codestar-documents/docs/software-engineering/phase05-tdd">TDD</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/codestar-documents/docs/software-engineering/phase06-cicd">CI/CD</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/codestar-documents/docs/software-engineering/phase07-SQL">SQL</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/codestar-documents/docs/software-engineering/phase08-EFCore">EFCore</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/codestar-documents/docs/software-engineering/phase08-optional01-Elasticsearch">Elasticsearch (اختیاری)</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/codestar-documents/docs/software-engineering/phase08-optional02-nest">Nest (اختیاری)</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/codestar-documents/docs/software-engineering/phase11-network">Network</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/codestar-documents/docs/software-engineering/phase12-web">ASP.NET Core</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/codestar-documents/docs/soft-skills">مهارت‌های نرم</a><button aria-label="باز کردن دسته بندی در نوار کناری &#x27;مهارت‌های نرم&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/codestar-documents/docs/devops">DevOps</a><button aria-label="باز کردن دسته بندی در نوار کناری &#x27;DevOps&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/codestar-documents/docs/project">پروژه</a><button aria-label="باز کردن دسته بندی در نوار کناری &#x27;پروژه&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/codestar-documents/docs/Roadmaps">مسیرهای یادگیری</a><button aria-label="باز کردن دسته بندی در نوار کناری &#x27;مسیرهای یادگیری&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="نشانگر صفحات"><ul class="breadcrumbs"><li class="breadcrumbs__item"><a aria-label="صفحه اصلی" class="breadcrumbs__link" href="/codestar-documents/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><a class="breadcrumbs__link" href="/codestar-documents/docs/software-engineering"><span>مهندسی نرم‌افزار</span></a></li><li class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link">Elasticsearch (اختیاری)</span></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">مطالب این صفحه</button></div><div class="theme-doc-markdown markdown"><header><h1>Elasticsearch (اختیاری)</h1></header><h2 class="anchor anchorWithStickyNavbar_LWe7" id="مقدمه">مقدمه<a href="#مقدمه" class="hash-link" aria-label="لینک مستقیم به مقدمه" title="لینک مستقیم به مقدمه">​</a></h2>
<p>در این فاز با موتور جستجوی Elasticsearch
و نحوه‌ی کار کردن با آن آشنا می‌شوید.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="elasticsearch-چیست">Elasticsearch چیست؟<a href="#elasticsearch-چیست" class="hash-link" aria-label="لینک مستقیم به Elasticsearch چیست؟" title="لینک مستقیم به Elasticsearch چیست؟">​</a></h2>
<p>در سال‌های اخیر با توجه به رشد روزافزون خدمات مبتنی بر نرم‌افزار و تولید مقادیر زیادی داده، امکان جستجو در این داده‌ها اهمیت فوق‌العاده‌ای پیدا کرده است. هم‌چنین علاوه بر داده‌هایی که مربوط به فعالیت کاربران در بسترهای مجازی است، خود سیستم‌های نرم‌افزاری مقادیر زیادی log
تولید می‌کنند که امکان جستجو در آن‌ها می‌تواند کار را برای مدیران سیستم و توسعه‌دهندگان بسیار ساده‌تر کند.
د ر هر محصول نرم‌افزاری به احتمال قوی کاربر به امکان جستجو نیاز دارد که برای ایجاد این امکان می‌توان از موتورهای جستجو استفاده کرد. محصولات متفاوتی در این حوزه وجود دارند که در حال حاضر معروف‌ترین و محبوب‌ترین آن‌ها Elasticsearch
نام دارد.</p>
<p>Elasticsearch
یک موتور جستجوی Full-text
است که به طور متن‌باز توسعه داده می‌شود. این محصول به کاربران این امکان را می‌دهد که در تعداد زیادی سند متنی جستجو کنند. این موتور جستجو توسط بسیاری از شرکت‌های نرم‌افزاری دنیا مورد استفاده قرار گرفته است. هم‌چنین در محبوبیت آن همین بس که در github
بیش از 60هزار ستاره دریافت کرده است. این موتور جستجو کاربردهای فراوانی در حوزه‌های مختلف دارد که از این کاربردها می‌توان به امکان ارائه‌ی جستجو در محصولات نرم‌افزاری و جمع‌‌آوری و تحلیل logهای
سیستم‌های نرم‌افزاری اشاره کرد.</p>
<p>علاوه بر خود Elasticsearch
چندین محصول دیگر به عنوان Elastic Stack
نیز وجود دارند که از مهم‌ترین آن‌ها می‌توان به Kibana،
Logstash
و APM
اشاره کرد.</p>
<ul>
<li>
<p>Kibana</p>
<p>این محصول امکان مدیریت کلاستر Elasticsearch
و Visualize
کردن داده‌ها در داشبوردها و نمودارهای مختلف را به مدیر سیستم می‌دهد.</p>
</li>
<li>
<p>Logstash</p>
<p>با این محصول می‌توان Logهای
سیستم را جمع‌آوری کرد که در ادامه بتوان راحت‌تر آن‌ها را مورد تحلیل و بررسی قرار داد.</p>
</li>
<li>
<p>APM (Application Performance Monitoring)</p>
<p>این محصول به ایجادکنندگان نرم‌افزار این امکان را می‌دهد تا نرم‌افزار خود را از نظر کارایی مورد نظارت قرار دهند به این صورت که می‌توانند زمانی که صرف هر یک از قسمت‌های نرم‌افزار و یا فراخوانی هر یک از توابع شده است را اندازه‌گیری کنند و متوجه گلوگاه‌های سیستم شوند.</p>
</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="elasticsearch-کمی-عمیقتر">Elasticsearch کمی عمیق‌تر<a href="#elasticsearch-کمی-عمیقتر" class="hash-link" aria-label="لینک مستقیم به Elasticsearch کمی عمیق‌تر" title="لینک مستقیم به Elasticsearch کمی عمیق‌تر">​</a></h2>
<p>برای آشنایی با موتور جستجوی Elasticsearch
مطالعه‌ی «<a href="https://www.elastic.co/guide/en/elasticsearch/reference/current/elasticsearch-intro.html" target="_blank" rel="noopener noreferrer">What is Elasticsearch</a>»
مفید است.</p>
<p>شما در ابتدا، جستجو در اسناد متنی را به وسیله‌ی Inverted Index
پیاده‌سازی کردید. موتور جستجوی Elasticsearch
نیز قابلیتی مشابه پروژه‌ی شما ارائه می‌دهد.
این قابلیت شامل index
کردن اسناد متنی و سپس جستجو در آن‌ها می‌شود که البته امکانات بسیار پیشرفته‌تری را نیز در بر دارد که در ادامه برخی از آن‌ها را ذکر می‌کنیم:</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="امکانات-معماری">امکانات معماری<a href="#امکانات-معماری" class="hash-link" aria-label="لینک مستقیم به امکانات معماری" title="لینک مستقیم به امکانات معماری">​</a></h3>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="توزیعشدگی">توزیع‌شدگی<a href="#توزیعشدگی" class="hash-link" aria-label="لینک مستقیم به توزیع‌شدگی" title="لینک مستقیم به توزیع‌شدگی">​</a></h4>
<p>شما می‌توانید Elasticsearch
را روی چندین سرور نصب کنید و آن‌ها را به یک دیگر متصل کنید و این سرورها با همکاری یکدیگر قدرت و سرعت بیش‌تری را در اختیار شما قرار دهند.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="مقیاسپذیری">مقیاس‌پذیری<a href="#مقیاسپذیری" class="hash-link" aria-label="لینک مستقیم به مقیاس‌پذیری" title="لینک مستقیم به مقیاس‌پذیری">​</a></h4>
<p>با افزودن تعداد سرورها می‌توانید مقادیر بیش‌تری داده در Elasticsearch
بریزید و کماکان سرعت بالای index
کردن و جستجو حفظ شود.</p>
<div class="theme-admonition theme-admonition-tip admonition_xJq3 alert alert--success"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>‌</div><div class="admonitionContent_BuS1"><p>توضیحات بیش‌تر را در <a href="https://www.elastic.co/guide/en/elasticsearch/reference/current/scalability.html" target="_blank" rel="noopener noreferrer">Scalability and resilience: clusters, nodes, and shards</a>
مطالعه کنید.</p></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="امکانات-کارکردی">امکانات کارکردی<a href="#امکانات-کارکردی" class="hash-link" aria-label="لینک مستقیم به امکانات کارکردی" title="لینک مستقیم به امکانات کارکردی">​</a></h3>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="dynamic-mapping">Dynamic Mapping<a href="#dynamic-mapping" class="hash-link" aria-label="لینک مستقیم به Dynamic Mapping" title="لینک مستقیم به Dynamic Mapping">​</a></h4>
<p>سندی که می‌خواهید در Elasticsearch
بریزید می‌تواند هر ساختاری داشته باشد و لازم نیست از قبل ساختار آن را در Elasticsearch
تعیین کنید چرا که به طور خودکار آن را تشخیص می‌دهد و ساختار مناسب را تعریف می‌کند.</p>
<div class="theme-admonition theme-admonition-tip admonition_xJq3 alert alert--success"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>‌</div><div class="admonitionContent_BuS1"><p>برای مطالعه بیشتر از <a href="https://www.elastic.co/guide/en/elasticsearch/reference/current/dynamic-mapping.html" target="_blank" rel="noopener noreferrer">Dynamic mapping</a>
استفاده کنید.</p></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="normalization">Normalization<a href="#normalization" class="hash-link" aria-label="لینک مستقیم به Normalization" title="لینک مستقیم به Normalization">​</a></h4>
<p>Elasticsearch
امکانات نرمال‌سازی متن پیشرفته از جمله Analyzerها
و Tokenizerهای
مختلفی دارد که کار کاربر را بسیار ساده می‌کند.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="پشتیبانی-از-انواع-مختلف-داده">پشتیبانی از انواع مختلف داده<a href="#پشتیبانی-از-انواع-مختلف-داده" class="hash-link" aria-label="لینک مستقیم به پشتیبانی از انواع مختلف داده" title="لینک مستقیم به پشتیبانی از انواع مختلف داده">​</a></h4>
<p>به غیر از مقادیر متنی می‌توان داده‌های عددی، تاریخی و یا مختصات مکانی و ... را در Elasticsearch
ریخت و روی آن‌ها جستجو کرد. برای مثال فقط در سندهای یک بازه‌ی زمانی خاص و یا سندهای یک محدوده‌ی جغرافیایی خاص جستجو کرد.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="پشتیبانی-از-جستجوی-fuzzy-و-زیررشته">پشتیبانی از جستجوی Fuzzy و زیررشته<a href="#پشتیبانی-از-جستجوی-fuzzy-و-زیررشته" class="hash-link" aria-label="لینک مستقیم به پشتیبانی از جستجوی Fuzzy و زیررشته" title="لینک مستقیم به پشتیبانی از جستجوی Fuzzy و زیررشته">​</a></h4>
<p>در بسیاری مواقع کاربران ممکن است مقداری از عبارت را به اشتباه تایپ کنند یا فقط زیررشته‌ای از یک عبارت را جستجو کنند. Elasticsearch
از این نوع جستجوها نیز پشتیبانی می‌کند.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="آشنایی-با-مفاهیم">آشنایی با مفاهیم<a href="#آش نایی-با-مفاهیم" class="hash-link" aria-label="لینک مستقیم به آشنایی با مفاهیم" title="لینک مستقیم به آشنایی با مفاهیم">​</a></h2>
<p>در Elasticsesarch
چندین مفهوم مطرح می‌شود که در زیر توضیح داده شده‌اند:</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="cluster">Cluster<a href="#cluster" class="hash-link" aria-label="لینک مستقیم به Cluster" title="لینک مستقیم به Cluster">​</a></h3>
<p>همان‌طور که گفته شد Elasticsearch
توزیع‌شده است. به تعدادی از سرورها که به یکدیگر متصل هستند و سرویس Elasticsearch
را ارائه می‌دهند Elasticsearch Cluster
گفته می‌شود.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="node">Node<a href="#node" class="hash-link" aria-label="لینک مستقیم به Node" title="لینک مستقیم به Node">​</a></h3>
<p>به هر یک از سرورهای Elasticsearch
در یک Cluster
یک Node
گفته می‌شود که Nodeها
نقش‌های مختلفی بر عهده دارند که با توجه به نقش آن‌ها به چند دسته تقسیم می‌شوند که مهم‌ترین آن‌ها Master Node
و Data Node
هستند.</p>
<div class="theme-admonition theme-admonition-tip admonition_xJq3 alert alert--success"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>‌</div><div class="admonitionContent_BuS1"><p>برای مطالعه‌ی بیش‌تر می‌توانید به <a href="https://www.elastic.co/guide/en/elasticsearch/reference/current/modules-node.html" target="_blank" rel="noopener noreferrer">این‌جا</a>
مراجعه کنید.</p></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="document">Document<a href="#document" class="hash-link" aria-label="لینک مستقیم به Document" title="لینک مستقیم به Document">​</a></h3>
<p>به هر یک از سندهای متنی که در Elasticsearch
بارگذاری می‌شود Document
گفته می‌شود. این مفهوم، مفهومی فراتر از Elastcisearch
است و کلاً در حوزه‌ی بازیابی اطلاعات مورد استفاده قرار می‌گیرد.
برای مثال فرض کنید بخواهیم در غزل‌های حافظ جستجو کنیم در این صورت بسته به کاربرد ممکن است هر یک از ابیات به عنوان یک Document
در نظر گرفته شوند و یا هر یک از غزل‌ها یک Document
به حساب بیایند.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="index">Index<a href="#index" class="hash-link" aria-label="لینک مستقیم به Index" title="لینک مستقیم به Index">​</a></h3>
<p>در Elasticsearch
مفهوم Index
به هر یک از مخازنی گفته می‌شود که تعدادی Document
با قالب مشابه در آن قرار گرفته‌اند برای مثال می‌توان آن را با یک جدول در پایگاه داده‌های رابطه‌ای مقایسه کرد که البته این دو مفهوم یکسان نیستند و تفاوت‌هایی دارند که فعلاً از آن‌ها چشم‌پوشی می‌کنیم.</p>
<div class="theme-admonition theme-admonition-note admonition_xJq3 alert alert--secondary"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>‌</div><div class="admonitionContent_BuS1"><p>علاوه بر مفهوم گفته‌شده از عبارت Index
به صورت فعلی به معنای ریختن داده در Elasticsearch
استفاده می‌شود.</p></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="mapping">Mapping<a href="#mapping" class="hash-link" aria-label="لینک مستقیم به Mapping" title="لینک مستقیم به Mapping">​</a></h3>
<p>در هر Index
سندها قالب مشخصی دارند که به این قالب Mapping
گفته می‌شود. برای مثال اگر بخواهیم مشخصات تعدادی دانشجو را در Elasticsearch
بریزیم و هر دانشجو را یک Document
در نظر بگیریم، هر دانشجو نام، نام خانوادگی، رشته، تاریخ ورود، سن، معدل و ... دارد که از هر کدام از این موارد در Elasticsearch
با عنوان Field
یاد می‌شود. هر کدام از این Fieldها
نوع مشخصی دارد برای مثال نام‌، نام خانوادگی و رشته از نوع text
هستند و مثلاً سن از نوع عدد طبیعی و معدل از جنس عدد اعشاری است و تاریخ ورود می‌تواند از جنس تاریخ در نظر گرفته شود. به این قالب که Fieldهای
مختلف و جنس هر کدام را مشخص می‌کند Mapping
گفته می‌شود.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="shard">Shard<a href="#shard" class="hash-link" aria-label="لینک مستقیم به Shard" title="لینک مستقیم به Shard">​</a></h3>
<p>همان‌طور که پیش‌تر اشاره شد Elasticsearch
به صورت توزیع‌شده است که می‌توان داده را در چندین سرور توزیع کرد. نحوه‌ی توزیع به این صورت است که هر Index
دارای تعدادی Shard
است که این Shardها
به طور متوازن بین سرورها توزیع می‌شوند. برای مثال اگر 5 سرور داشته باشیم و یک Index
دارای 10 شارد باشد سهم هر سرور 2 شارد خواهد بود یعنی 2 شارد روی آن سرور نگه‌داری می‌شود.
حالا فرض کنید که یکی از سرورها دچار مشکل شود که در این صورت آن قسمت از داده که در اختیار آن سرور بوده است از دسترس خارج می‌شود. Elasticsearch
برای این موضوع نیز راه‌حلی اندیشیده است به این صورت که با توجه به میزان اهمیت داده می‌توان از هر یک از Shardها
تعدادی کپی داشت که در صورت از دسترس خارج شدن داده‌ی اصلی، داده هم‌چنان از طریق آن کپی‌ها در دسترس باشد.
به Shardهای
اصلی Primary Shard
و به کپی‌ها Replica Shard
گفته می‌شود.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="segment">Segment<a href="#segment" class="hash-link" aria-label="لینک مستقیم به Segment" title="لینک مستقیم به Segment">​</a></h3>
<p>هر یک از Shardها
دارای تعدادی Segment
است. علت وجود این Segmentها
این است که Elasticsearch
بر پایه‌ی <a href="https://lucene.apache.org/" target="_blank" rel="noopener noreferrer">Apache Lucene</a>
ایجاد شده است. به اختصار می‌توان گفت که Apache Lucene
سرویس جستجو را ارائه می‌دهد اما تنها روی یک ماشین بدون قابلیت‌های توزیع‌شدگی که Elasticsearch
قابلیت توزیع‌شدگی را به آن اضافه می‌کند. در حقیقت هر یک از Shardها
یک Instance
از نرم‌افزار Lucene
است.</p>
<p>به طور خلاصه می‌توان گفت در Elasticsearch
هر Cluster
تعدادی Node
دارد. هر Node
میزبان تعدادی Shard
است که هر Shard
از تعدادی Segment
تشکیل شده است. هر Index
از تعدادی Shard
تشکیل شده است.</p>
<div class="theme-admonition theme-admonition-tip admonition_xJq3 alert alert--success"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>‌</div><div class="admonitionContent_BuS1"><p>برای مطالعه‌ی بیش‌تر درباره‌ی Indexها
و Documentها
از <a href="https://www.elastic.co/guide/en/elasticsearch/reference/current/documents-indices.html" target="_blank" rel="noopener noreferrer">Data in: documents and indices</a>
استفاده کنید.</p></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="کار-با-elasticsearch">کار با Elasticsearch<a href="#کار-با-elasticsearch" class="hash-link" aria-label="لینک مستقیم به کار با Elasticsearch" title="لینک مستقیم به کار با Elasticsearch">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="نصب-و-راهاندازی-elasticsearch-و-kibana">نصب و راه‌اندازی Elasticsearch و Kibana<a href="#نصب-و-راهاندازی-elasticsearch-و-kibana" class="hash-link" aria-label="لینک مستقیم به نصب و راه‌اندازی Elasticsearch و Kibana" title="لینک مستقیم به نصب و راه‌اندازی Elasticsearch و Kibana">​</a></h3>
<ol>
<li>
<p>ابتدا Elasticsearch
متناسب با سیستم‌عامل خود را از <a href="https://www.elastic.co/downloads/elasticsearch" target="_blank" rel="noopener noreferrer">اینجا</a>
دریافت و نصب کنید.</p>
</li>
<li>
<p>سپس Kibana
متناسب با سیستم‌عامل خود را از <a href="https://www.elastic.co/downloads/kibana" target="_blank" rel="noopener noreferrer">اینجا</a>
دریافت و نصب کنید.</p>
<div class="theme-admonition theme-admonition-note admonition_xJq3 alert alert--secondary"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>‌</div><div class="admonitionContent_BuS1"><p>لینک‌های داده شده تحریم هستند که برای رفع تحریم باید از VPN
و یا <a href="https://shecan.ir/" target="_blank" rel="noopener noreferrer">سرویس شکن</a>
استفاده کنید.</p></div></div>
<div class="theme-admonition theme-admonition-note admonition_xJq3 alert alert--secondary"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>‌</div><div class="admonitionContent_BuS1"><p>اگر از یکی از توزیع‌های سیستم‌عامل لینوکس استفاده می‌کنید می‌توانید برای نصب این دو برنامه از Package Managerها
نیز استفاده کنید.</p></div></div>
</li>
<li>
<p>Elasticsearch
و Kibana
را اجرا کنید.</p>
</li>
</ol>
<p>به طور پیش‌فرض Elasticsearch
روی پورت 9200 و Kibana
روی پورت 5601 راه‌اندازی می‌شود. برای اطمینان از درستی اجرای آن‌ها می‌توانید در مرورگر خود آدرس‌های زیر را تست کنید و مطمئن شوید که این دو برنامه به درستی کار می‌کنند:</p>
<ul>
<li><a href="http://localhost:9200/" target="_blank" rel="noopener noreferrer">http://localhost:9200/</a></li>
<li><a href="http://localhost:5601/" target="_blank" rel="noopener noreferrer">http://localhost:5601/</a></li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="ایجاد-index">ایجاد index<a href="#ایجاد-index" class="hash-link" aria-label="لینک مستقیم به ایجاد index" title="لینک مستقیم به ایجاد index">​</a></h3>
<ol>
<li>
<p>برای اجرای queryها
از قسمت Dev Tools
در Kibana
استفاده کنید.</p>
</li>
<li>
<p>ابتدا با اجرای Query
زیر یک index
به نام <code>people-simple</code>
در Elasticsearch
ایجاد کنید:</p>
<div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">PUT /people-simple</span><br></span></code></pre></div></div>
<div class="theme-admonition theme-admonition-tip admonition_xJq3 alert alert--success"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>‌</div><div class="admonitionContent_BuS1"><p>در <a href="https://www.elastic.co/guide/en/elasticsearch/reference/current/indices-create-index.html" target="_blank" rel="noopener noreferrer">این لینک</a>
توضیحات بیش‌تری درباره‌ی ایجاد index
داده شده است.</p></div></div>
</li>
</ol>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="بارگذاری-اسناد-متنی">بارگذاری اسناد متنی<a href="#بارگذاری-اسناد-متنی" class="hash-link" aria-label="لینک مستقیم به بارگذاری اسناد متنی" title="لینک مستقیم به بارگذاری اسناد متنی">​</a></h3>
<ol>
<li>
<p>فایل <a href="/codestar-documents/assets/files/people-simple-888f609b9f71d5e68c7e16c6065a0f8f.json" target="_blank">people-simple.json</a>
را دریافت کنید که در آن مشخصات چند شخص در قالب JSON
آورده شده است.</p>
</li>
<li>
<p>این اشخاص را در index
ایجاد شده بریزید.
برای این کار می‌توانید از <a href="https://www.elastic.co/guide/en/elasticsearch/reference/current/docs-index_.html" target="_blank" rel="noopener noreferrer">این لینک</a>
کمک بگیرید.</p>
<p>مثالی نیز در زیر آمده است:</p>
<div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">POST /people-simple/_doc/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;name&quot;: &quot;Ali&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;last_name&quot;: &quot;Mohammad&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;age&quot;: 50</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre></div></div>
</li>
<li>
<p>با استفاده از Query
زیر از درستی کار خود مطمئن شوید:</p>
<div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">GET /people-simple/_search</span><br></span></code></pre></div></div>
</li>
</ol>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="جستجو-در-اسناد-متنی-بارگذاری-شده">جستجو در اسناد متنی بارگذاری شده<a href="#جستجو-در-اسناد-متنی-بارگذاری-شده" class="hash-link" aria-label="لینک مستقیم به جستجو در اسناد متنی بارگذاری شده" title="لینک مستقیم به جستجو در اسناد متنی بارگذاری شده">​</a></h3>
<p>انواع مختلف Query
به ویژه Queryهای
زیر را امتحان کنید و امکانات هر یک از آن‌ها و تفاوت آن‌ها را با توجه به نتایج به دست‌آمده دریابید.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="match-query"><a href="https://www.elastic.co/guide/en/elasticsearch/reference/current/query-dsl-match-query.html" target="_blank" rel="noopener noreferrer">Match Query</a><a href="#match-query" class="hash-link" aria-label="لینک مستقیم به match-query" title="لینک مستقیم به match-query">​</a></h4>
<div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">GET /people-simple/_search</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;query&quot;:{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;match&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &quot;name&quot;: &quot;mohammad&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="fuzzy-query"><a href="https://www.elastic.co/guide/en/elasticsearch/reference/current/query-dsl-fuzzy-query.html" target="_blank" rel="noopener noreferrer">Fuzzy Query</a><a href="#fuzzy-query" class="hash-link" aria-label="لینک مستقیم به fuzzy-query" title="لینک مستقیم به fuzzy-query">​</a></h4>
<div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">GET /people-simple/_search</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;query&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;match&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &quot;name&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                &quot;query&quot;: &quot;mohammad&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                &quot;fuzziness&quot;: 1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="term-query"><a href="https://www.elastic.co/guide/en/elasticsearch/reference/current/query-dsl-term-query.html" target="_blank" rel="noopener noreferrer">Term Query</a><a href="#term-query" class="hash-link" aria-label="لینک مستقیم به term-query" title="لینک مستقیم به term-query">​</a></h4>
<div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">GET /people-simple/_search</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;query&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;term&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &quot;name&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                &quot;value&quot;: &quot;mohammad&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="range-query"><a href="https://www.elastic.co/guide/en/elasticsearch/reference/current/query-dsl-range-query.html" target="_blank" rel="noopener noreferrer">Range Query</a><a href="#range-query" class="hash-link" aria-label="لینک مستقیم به range-query" title="لینک مستقیم به range-query">​</a></h4>
<div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">GET /people-simple/_search</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;query&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;range&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &quot;age&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                &quot;gte&quot;: 24,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                &quot;lte&quot;: 35</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="multi-match-query"><a href="https://www.elastic.co/guide/en/elasticsearch/reference/current/query-dsl-multi-match-query.html" target="_blank" rel="noopener noreferrer">Multi-match Query</a><a href="#multi-match-query" class="hash-link" aria-label="لینک مستقیم به multi-match-query" title="لینک مستقیم به multi-match-query">​</a></h4>
<div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">GET /people-simple/_search</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;query&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;multi_match&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &quot;query&quot;: &quot;mohammad&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &quot;fields&quot;: [&quot;name&quot;, &quot;last_name&quot;],</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &quot;fuzziness&quot;: 1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="bool-query"><a href="https://www.elastic.co/guide/en/elasticsearch/reference/current/query-dsl-bool-query.html" target="_blank" rel="noopener noreferrer">Bool Query</a><a href="#bool-query" class="hash-link" aria-label="لینک مستقیم به bool-query" title="لینک مستقیم به bool-query">​</a></h4>
<div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">GET /people-simple/_search</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;query&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;bool&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &quot;must&quot;: [</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    &quot;match&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        &quot;name&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                            &quot;query&quot;: &quot;mohammad&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                            &quot;fuzziness&quot;: 1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            ],</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &quot;should&quot;: [</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    &quot;range&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        &quot;age&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                            &quot;gte&quot;: 10,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                            &quot;lte&quot;: 30</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            ]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre></div></div>
<div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">GET /people-simple/_search</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;query&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;bool&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &quot;must&quot;: [</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    &quot;match&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        &quot;name&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                            &quot;query&quot;: &quot;mohammad&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                            &quot;fuzziness&quot;: 1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            ],</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &quot;must_not&quot;: [</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    &quot;match&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        &quot;last_name&quot;: &quot;mostmand&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            ]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre></div></div>
<div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">GET /people-simple/_search</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;query&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;bool&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &quot;must&quot;: [</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    &quot;match&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        &quot;name&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                            &quot;query&quot;: &quot;mohammad&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                            &quot;fuzziness&quot;: 1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    &quot;match&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        &quot;last_name&quot;: &quot;mostmand&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            ]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre></div></div>
<div class="theme-admonition theme-admonition-tip admonition_xJq3 alert alert--success"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>‌</div><div class="admonitionContent_BuS1"><p>برای آشنایی بیش‌تر با Queryهای
مختلف که Elasticsearch
در اختیار کاربر می‌گذارد می‌توانید از <a href="https://www.elastic.co/guide/en/elasticsearch/reference/current/query-dsl.html" target="_blank" rel="noopener noreferrer">Query DSL</a>
کمک بگیرید.</p></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="text-analysis">Text Analysis<a href="#text-analysis" class="hash-link" aria-label="لینک مستقیم به Text Analysis" title="لینک مستقیم به Text Analysis">​</a></h3>
<p>برای این که بتوان در اسناد متنی جستجو کرد نیاز است تا این اسناد نرمال‌سازی شوند. برای مثال باید حروف کلمات lowercase
شوند و یا کلاً این که یک متن به کلمات شکسته شود و هم هنگام index
کردن و هم هنگام جستجو این اتفاق بیفتد.</p>
<p>Elasticsearch
در این زمینه امکانات زیادی ارائه می‌دهد. برای استفاده از این امکانات  باید هنگام تعریف index
از Analyzerها
و Tokenizerهای
مناسب استفاده کرد. ابتدا به توضیحی از این مفاهیم می‌پردازیم:</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="analyzer">Analyzer<a href="#analyzer" class="hash-link" aria-label="لینک مستقیم به Analyzer" title="لینک مستقیم به Analyzer">​</a></h4>
<p>مجموعه‌ای از Tokenizerها
و Normalizerها
که برای هر Field
در Mapping
تعریف می‌شود و نحوه‌ی برخورد با مقادیر آن Field
را مشخص می‌کند.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="tokenizer">Tokenizer<a href="#tokenizer" class="hash-link" aria-label="لینک مستقیم به Tokenizer" title="لینک مستقیم به Tokenizer">​</a></h4>
<p>وقتی می‌خواهیم یک عبارت متنی را index
کنیم برای این که قابل جستجو باشد باید آن را به بخش‌های کوچک‌تر به نام Token
تجزیه کنیم. Tokenizer
این وظیفه را بر عهده دارد. انواع Tokenizer
وجود دارد که ساده‌ترین و متداول‌ترین نوع آن شکستن عبارت به کلمات تشکیل‌دهنده‌ی آن است.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="normalizer">Normalizer<a href="#normalizer" class="hash-link" aria-label="لینک مستقیم به Normalizer" title="لینک مستقیم به Normalizer">​</a></h4>
<p>انتظار داریم وقتی کلمه‌ی &#x27;quick&#x27;
را جستجو می‌کنیم سندهایی که دارای کلمه‌ی &#x27;Quick&#x27;
هستند نیز در نتایج ظاهر شوند بنابراین نیاز است تا همه‌ی کلمات را نرمال کنیم که در اینجا lowercase
کردن کاراکترها می‌تواند مناسب باشد.</p>
<div class="theme-admonition theme-admonition-note admonition_xJq3 alert alert--secondary"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>‌</div><div class="admonitionContent_BuS1"><p>تفاوت Normalizer
با Tokenizer
در این است که Normalizer
یک Token
ورودی می‌گیرد و یک Token
خروجی می‌دهد اما Tokenizer
یک عبارت ورودی می‌گیرد و تعدادی Token
خروجی می‌دهد.</p></div></div>
<div class="theme-admonition theme-admonition-tip admonition_xJq3 alert alert--success"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>‌</div><div class="admonitionContent_BuS1"><p>برای مطالعه‌ی بیش‌تر می‌توانید از <a href="https://www.elastic.co/guide/en/elasticsearch/reference/current/analysis.html" target="_blank" rel="noopener noreferrer">این لینک</a>
استفاده کنید.</p></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="استفاده-از-analyzerها">استفاده از Analyzerها<a href="#استفاده-از-analyzerها" class="hash-link" aria-label="لینک مستقیم به استفاده از Analyzerها" title="لینک مستقیم به استفاده از Analyzerها">​</a></h3>
<p>در قسمت «بارگذاری اسناد متنی» ما Analyzerای
تعیین نکردیم و Elasticsearch
با توجه به ساختار سندهایی که در آن بارگذاری کردیم از Analyzerهای
پیش‌فرض استفاده کرد. با اجرای Query
زیر می‌توانید Mapping
پیش‌فرض ایجاد شده برای هر Field
را مشاهده کنید:</p>
<div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">GET people-simple/_mapping</span><br></span></code></pre></div></div>
<p>حال می‌خواهیم Mapping
و Analyzerها
را خودمان تعیین کنیم.</p>
<ol>
<li>ابتدا با استفاده از <a href="https://www.elastic.co/guide/en/elasticsearch/reference/current/indices-analyze.html" target="_blank" rel="noopener noreferrer">Analyze API</a>
نتیجه‌ی استفاده از چند مورد از Analyzerها
را مشاهده می‌کنیم. در زیر چند Query
آورده شده است که اجرای آن‌ها به روشن کردن قضیه کمک می‌کند:</li>
</ol>
<div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">POST _analyze</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;analyzer&quot;: &quot;whitespace&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;text&quot;: &quot;The quick brown fox.&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre></div></div>
<p>موارد استفاده شده:</p>
<ul>
<li><a href="https://www.elastic.co/guide/en/elasticsearch/reference/current/analysis-whitespace-analyzer.html" target="_blank" rel="noopener noreferrer">Whitespace Analyzer</a></li>
</ul>
<div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">POST _analyze</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;analyzer&quot;: &quot;standard&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;text&quot;: &quot;The quick brown fox.&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre></div></div>
<p>موارد استفاده شده:</p>
<ul>
<li><a href="https://www.elastic.co/guide/en/elasticsearch/reference/current/analysis-standard-analyzer.html" target="_blank" rel="noopener noreferrer">Standard Analyzer</a></li>
</ul>
<div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">POST _analyze</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;tokenizer&quot;: &quot;standard&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;filter&quot;: [ &quot;lowercase&quot;, &quot;asciifolding&quot; ],</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;text&quot;: &quot;Is this déja vu?&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre></div></div>
<p>موارد استفاده شده:</p>
<ul>
<li>
<p><a href="https://www.elastic.co/guide/en/elasticsearch/reference/current/analysis-standard-tokenizer.html" target="_blank" rel="noopener noreferrer">Standard Tokenizer</a></p>
</li>
<li>
<p><a href="https://www.elastic.co/guide/en/elasticsearch/reference/current/analysis-lowercase-tokenfilter.html" target="_blank" rel="noopener noreferrer">Lowercase Token Filter</a></p>
</li>
<li>
<p><a href="https://www.elastic.co/guide/en/elasticsearch/reference/current/analysis-asciifolding-tokenfilter.html" target="_blank" rel="noopener noreferrer">ASCII Folding Token Filter</a></p>
</li>
</ul>
<p>حالا می‌خواهیم یک Analyzer
مناسب خودمان ایجاد کنیم که Query
زیر مثالی از آن است:</p>
<div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">PUT people-simple2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;settings&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;index&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;max_ngram_diff&quot;: 7</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;analysis&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &quot;analyzer&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                &quot;my_ngram_analyzer&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    &quot;type&quot;: &quot;custom&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    &quot;tokenizer&quot;: &quot;standard&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    &quot;filter&quot;: [</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        &quot;lowercase&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        &quot;my_ngram_filter&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    ]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &quot;filter&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                &quot;my_ngram_filter&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    &quot;type&quot;: &quot;ngram&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    &quot;min_gram&quot;: 3,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    &quot;max_gram&quot;: 10</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre></div></div>
<p>موارد استفاده شده:</p>
<ul>
<li>
<p><a href="https://www.elastic.co/guide/en/elasticsearch/reference/current/analysis-custom-analyzer.html" target="_blank" rel="noopener noreferrer">Custom Analyzer</a></p>
</li>
<li>
<p><a href="https://www.elastic.co/guide/en/elasticsearch/reference/current/analysis-standard-tokenizer.html" target="_blank" rel="noopener noreferrer">Standard Tokenizer</a></p>
</li>
<li>
<p><a href="https://www.elastic.co/guide/en/elasticsearch/reference/current/analysis-lowercase-tokenfilter.html" target="_blank" rel="noopener noreferrer">Lowercase Token Filter</a></p>
</li>
<li>
<p><a href="https://www.elastic.co/guide/en/elasticsearch/reference/current/analysis-ngram-tokenfilter.html" target="_blank" rel="noopener noreferrer">N-gram Token Filter</a></p>
</li>
</ul>
<p>در این Query
ما یک index
به نام <code>people-simple2</code>
ساختیم که یک Custom Analyzer
به اسم <code>my_ngram_analyzer</code>
دارد که این Analyzer
از یک Standard Tokenizer
همراه با Lowercase Token Filter
و <code>my_ngram_filter</code>
استفاده کرده است که <code>my_ngram_filter</code>
خود یک N-gram Token Filter
است که زیررشته‌های به طول 3 تا 10 از کلمات ایجاد می‌کند. در ابتدای کار نیز در تنظیمات این index
تعیین شده است که اختلاف min_gram
و max_gram
می‌تواند حداکثر 7 باشد که پیش‌فرض آن 1 است.</p>
<p>حالا با اجرای کوئری زیر نتیجه‌ی استفاده از این Custom Analyzer
من‌درآوردی را ببینید!</p>
<div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">POST people-simple2/_analyze</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;analyzer&quot;: &quot;my_ngram_analyzer&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;text&quot;: &quot;Mohammad Reza&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre></div></div>
<p>چه مشاهده می‌کنید؟ به نظر شما این Analyzer
چه کاربردی دارد؟</p>
<details class="details_lb9f alert alert--info details_b_Ee" data-collapsed="true"><summary><p>هشدار لوث‌سازی
(Spoiler Alert)</p></summary><div><div class="collapsibleContent_i85q"><p>اگر بخواهیم زیررشته‌ی عبارات را جستجو کنیم می‌توانیم از این Analyzer
استفاده کنیم مثلاً اگر عبارت «محمد» را جستجو کنیم و بخواهیم سندی که عبارت «محمدی» دارد نیز در نتایج ظاهر شود.</p></div></div></details>
<div class="theme-admonition theme-admonition-tip admonition_xJq3 alert alert--success"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>‌</div><div class="admonitionContent_BuS1"><p>برای آشنایی با انواع مختلف Tokenizerها
و Token Filterها
می‌توانید از
<a href="https://www.elastic.co/guide/en/elasticsearch/reference/current/analysis.html" target="_blank" rel="noopener noreferrer">این لینک</a>
استفاده کنید.</p></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="انجام-جستجوی-زیررشته">انجام جستجوی زیررشته<a href="#انجام-جستجوی-زیررشته" class="hash-link" aria-label="لینک مستقیم به انجام جستجوی زیررشته" title="لینک مستقیم به انجام جستجوی زیررشته">​</a></h3>
<ol>
<li>
<p>حالا از Analyzer
ساخته‌شده در قسمت قبل استفاده می‌کنیم:</p>
<div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">PUT people-simple2/_mapping</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;properties&quot;:{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;last_name&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &quot;type&quot;:&quot;text&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &quot;analyzer&quot;:&quot;my_ngram_analyzer&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre></div></div>
<p>مشخص است که یک Field
به نام last_name
با Analyzer
خودمان تعریف کردیم.</p>
</li>
<li>
<p>Query
زیر را اجرا کنید و نتیجه را ببینید:</p>
<div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">GET people-simple2/_search</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;query&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;match&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &quot;last_name&quot;: &quot;hamm&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre></div></div>
</li>
</ol>
<p>البته ایجاد Analyzer
و تعریف Fieldهای
index
را می‌توان در یک Query
انجام داد که البته به شرطی است که index
با آن نام قبلاً وجود نداشته باشد:</p>
<div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">PUT people-simple3</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;settings&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;index&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &quot;max_ngram_diff&quot;: 7</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;analysis&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &quot;analyzer&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                &quot;my_ngram_analyzer&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    &quot;type&quot;: &quot;custom&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    &quot;tokenizer&quot;: &quot;standard&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    &quot;filter&quot;: [</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        &quot;lowercase&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                        &quot;my_ngram_filter&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    ]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &quot;filter&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                &quot;my_ngram_filter&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    &quot;type&quot;: &quot;ngram&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    &quot;min_gram&quot;: 3,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    &quot;max_gram&quot;: 10</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;mappings&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;properties&quot;:{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &quot;last_name&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                &quot;type&quot;:&quot;text&quot;,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                &quot;analyzer&quot;:&quot;my_ngram_analyzer&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="typeهای-دیگر">Typeهای دیگر<a href="#typeهای-دیگر" class="hash-link" aria-label="لینک مستقیم به Typeهای دیگر" title="لینک مستقیم به Typeهای دیگر">​</a></h3>
<p>علاوه بر جنس text
می‌توان Fieldها
را از جنس‌های دیگر نیز تعریف کرد که مثالی از آن را در مشخصه‌ی age
از داده‌های نمونه دیدید.</p>
<p>حالا تلاش کنید که با استفاده از م طالب قسمت قبل Mapping
مناسب برای <a href="/codestar-documents/assets/files/people-37f049d502011ac3d0cbb332fae2f675.json" target="_blank">این داده‌های نمونه</a>
را در یک index
جدید تعریف کنید و تعدادی از این داده‌ها را در آن index
بریزید.</p>
<p>در <a href="https://www.elastic.co/guide/en/elasticsearch/reference/current/mapping-types.html" target="_blank" rel="noopener noreferrer">این لینک</a>
می‌توانید انواع مختلف داده در Elasticsearch
را مشاهده کنید و درباره‌ی آن‌ها اطلاعات بیش‌تری کسب کنید.</p>
<div class="theme-admonition theme-admonition-tip admonition_xJq3 alert alert--success"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>‌</div><div class="admonitionContent_BuS1"><p>مشخصه‌های latitude
و longitude
در داده‌های نمونه به طور جداگانه آورده شده‌اند که برای ریخته شدن در Elasticsearch
باید به یک Field
تبدیل شوند که این کار را به طور دستی و یا با نوشتن یک کد به زبان دلخواه می‌توانید انجام دهید.</p></div></div>
<div class="theme-admonition theme-admonition-tip admonition_xJq3 alert alert--success"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>‌</div><div class="admonitionContent_BuS1"><p>داده‌های از جنس تاریخ و زمان ممکن است در فرمت‌های مختلفی باشند لذا در هنگام تعریف Mapping
علاوه بر تعریف type،
فرمت متناسب با داده‌های نمونه را منظور کنید.</p></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="آشنایی-با-bulk-api">آشنایی با Bulk API<a href="#آشنایی-با-bulk-api" class="hash-link" aria-label="لینک مستقیم به آشنایی با Bulk API" title="لینک مستقیم به آشنایی با Bulk API">​</a></h3>
<p>اگر بخواهید تعداد زیادی سند در Elasticsearch
بارگذاری کنید این که برای هر کدام یک بار Query
بزنید چندان بهینه نیست چرا که سربار زیادی روی شبکه دارد و این مسئله کار را بسیار کند می‌کند. برای حل این مشکل باید چندین سند را به طور یک‌جا برای بارگذاری به Elasticsearch
فرستاد.</p>
<p>از <a href="https://www.elastic.co/guide/en/elasticsearch/reference/current/docs-bulk.html" target="_blank" rel="noopener noreferrer">این لینک</a>
کمک بگیرید و با Bulk API
آشنا شوید. با استفاده از آن <a href="/codestar-documents/assets/files/poems-38b4f2416771e1d79e4b0d5e6b9a1ed4.txt" target="_blank">ابیاتی از شعرای گران‌قدر پارسی‌زبان</a>
را به طور یک‌جا در Elasticsearch
بریزید.</p>
<div class="theme-admonition theme-admonition-tip admonition_xJq3 alert alert--success"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>‌</div><div class="admonitionContent_BuS1"><p>برای ساختن Bulk Query
نیاز دارید تا تغییراتی را در فایل داده شده اعمال کنید که به دلیل تعداد زیاد سندها به طور دستی امکان‌پذیر نیست که می‌توانید برای آن به زبان دلخواه کد بزنید.</p></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="aggregations">Aggregations<a href="#aggregations" class="hash-link" aria-label="لینک مستقیم به Aggregations" title="لینک مستقیم به Aggregations">​</a></h3>
<p>از هر کدام از شاعرها چند بیت در داده‌های بارگذاری شده در قسمت قبل وجود دارد؟</p>
<p>برای پاسخ به این سؤال می‌توانید از <a href="https://www.elastic.co/guide/en/elasticsearch/reference/current/search-aggregations-bucket-terms-aggregation.html" target="_blank" rel="noopener noreferrer">Terms Aggregation</a>
استفاده کنید.</p>
<p>با اجرای Query
زیر به پاسخ پرسش بالا برسید:</p>
<div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">GET poems/_search</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;aggs&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        &quot;poets&quot;: {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            &quot;terms&quot;: { &quot;field&quot;: &quot;poet.keyword&quot; } </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;size&quot;: 0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre></div></div>
<div class="theme-admonition theme-admonition-tip admonition_xJq3 alert alert--success"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>‌</div><div class="admonitionContent_BuS1"><p>Queryهای
Aggregation
در Elasticsearch
خود دنیایی دارد که بیان همه‌ی انواع آن در این مستند نمی‌گنجد. برای آشنایی می‌توانید به <a href="https://www.elastic.co/guide/en/elasticsearch/reference/current/search-aggregations.html" target="_blank" rel="noopener noreferrer">Aggregations</a>
مراجعه کنید.</p></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="پینوشت">پینوشت<a href="#پینوشت" class="hash-link" aria-label="لینک مستقیم به پینوشت" title="لینک مستقیم به پینوشت">​</a></h2>
<p>بهترین منبع برای آشنایی بیش‌تر با Elasticsearch
خود Doumentation
آن است که در زیر لینک آن آمده است:</p>
<ul>
<li><a href="https://www.elastic.co/guide/en/elasticsearch/reference/current/index.html" target="_blank" rel="noopener noreferrer">Elasticsearch Reference</a></li>
</ul>
<p>اشعار از API
<a href="http://ganjoor.net/" target="_blank" rel="noopener noreferrer">وبسایت گنجور</a>
به دست آمده است.</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class="col"><a href="https://github.com/Star-Academy/codestar-documents/tree/master/docs/software-engineering/phase08-optional01-Elasticsearch.md" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>ویرایش مطالب این صفحه</a></div><div class="col lastUpdated_JAkA"></div></div></footer></article><nav class="docusaurus-mt-lg pagination-nav" aria-label="صفحات مستندات"><a class="pagination-nav__link pagination-nav__link--prev" href="/codestar-documents/docs/software-engineering/phase08-EFCore"><div class="pagination-nav__sublabel">قبلی</div><div class="pagination-nav__label">EFCore</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/codestar-documents/docs/software-engineering/phase08-optional02-nest"><div class="pagination-nav__sublabel">بعدی</div><div class="pagination-nav__label">Nest (اختیاری)</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#مقدمه" class="table-of-contents__link toc-highlight">مقدمه</a></li><li><a href="#elasticsearch-چیست" class="table-of-contents__link toc-highlight">Elasticsearch چیست؟</a></li><li><a href="#elasticsearch-کمی-عمیقتر" class="table-of-contents__link toc-highlight">Elasticsearch کمی عمیق‌تر</a><ul><li><a href="#امکانات-معماری" class="table-of-contents__link toc-highlight">امکانات معماری</a></li><li><a href="#امکانات-کارکردی" class="table-of-contents__link toc-highlight">امکانات کارکردی</a></li></ul></li><li><a href="#آشنایی-با-مفاهیم" class="table-of-contents__link toc-highlight">آشنایی با مفاهیم</a><ul><li><a href="#cluster" class="table-of-contents__link toc-highlight">Cluster</a></li><li><a href="#node" class="table-of-contents__link toc-highlight">Node</a></li><li><a href="#document" class="table-of-contents__link toc-highlight">Document</a></li><li><a href="#index" class="table-of-contents__link toc-highlight">Index</a></li><li><a href="#mapping" class="table-of-contents__link toc-highlight">Mapping</a></li><li><a href="#shard" class="table-of-contents__link toc-highlight">Shard</a></li><li><a href="#segment" class="table-of-contents__link toc-highlight">Segment</a></li></ul></li><li><a href="#کار-با-elasticsearch" class="table-of-contents__link toc-highlight">کار با Elasticsearch</a><ul><li><a href="#نصب-و-راهاندازی-elasticsearch-و-kibana" class="table-of-contents__link toc-highlight">نصب و راه‌اندازی Elasticsearch و Kibana</a></li><li><a href="#ایجاد-index" class="table-of-contents__link toc-highlight">ایجاد index</a></li><li><a href="#بارگذاری-اسناد-متنی" class="table-of-contents__link toc-highlight">بارگذاری اسناد متنی</a></li><li><a href="#جستجو-در-اسناد-متنی-بارگذاری-شده" class="table-of-contents__link toc-highlight">جستجو در اسناد متنی بارگذاری شده</a></li><li><a href="#text-analysis" class="table-of-contents__link toc-highlight">Text Analysis</a></li><li><a href="#استفاده-از-analyzerها" class="table-of-contents__link toc-highlight">استفاده از Analyzerها</a></li><li><a href="#انجام-جستجوی-زیررشته" class="table-of-contents__link toc-highlight">انجام جستجوی زیررشته</a></li><li><a href="#typeهای-دیگر" class="table-of-contents__link toc-highlight">Typeهای دیگر</a></li><li><a href="#آشنایی-با-bulk-api" class="table-of-contents__link toc-highlight">آشنایی با Bulk API</a></li><li><a href="#aggregations" class="table-of-contents__link toc-highlight">Aggregations</a></li></ul></li><li><a href="#پینوشت" class="table-of-contents__link toc-highlight">پینوشت</a></li></ul></div></div></div></div></main></div></div></div><footer class="theme-layout-footer footer footer--dark"><div class="container container-fluid"><div class="footer__bottom text--center"><div class="footer__copyright">آکادمی ستاره - شرکت فناوری اطلاعات و ارتباطات مهیمن © ۱۴۰۴ </div></div></div></footer></div>
</body>
</html>